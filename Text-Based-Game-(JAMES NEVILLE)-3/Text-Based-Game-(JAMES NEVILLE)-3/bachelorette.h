#pragma once
#include "utility.h"
#include "player.h"

enum interests {
	manga,
	videogames,
	exercise,
	art,
};

map<interests, string> formatedInterests{
	{manga, "Manga"},
	{videogames, "Video Games"},
	{exercise, "Exercise"},
	{art, "Art"},
};

class dialogue {
public:
	string whatHappensText = "";
	string promptText = "";
	item* reward = NULL;
	int heartEffect = 0;
	int strikeEffect = 0;
	vector<dialogue*> response;

	void setDialogue(string whatHappensText, string promptText = "", int heartEffect = 0, int strikeEffect = 0, item* reward = NULL) {
		this->whatHappensText = whatHappensText;
		this->promptText = promptText;

		this->heartEffect = heartEffect;
		this->strikeEffect = strikeEffect;

		this->reward = reward;
	}
	void setResponses(vector<dialogue*> response) {
		this->response = response;
	}
};

class bachelorette {
public:
	string name = "Sam"; //Name
	interests specialInterest = manga; //Interest that the player needs to guess to proceed
	raceTemp* likes = NULL; //The race this bachelorette likes
	raceTemp* dislikes = NULL; //The race this bachelorette dislikes
	int currentHearts = 0; //The player must get 3 heart points to continue to date this bachelorette
	int maxHearts = 3;

	string initialDescription = "";
	string endDescriptionBad = "";
	string endDescriptionGood = "";

	map<int, dialogue> dialogueData;
#pragma region portrait
	const char* portrait = R"(
################################%#########################**********#######################%%%%%%%%%
##############################%%#######################***************#########################%%%%%
#############################%##########################****************###########################%
###########################%%############****#############****************##########################
##########################%%############*******########**##****************#########################
#########################%%%########*#*********************#****************########################
########################%%%#######**##*****************#********************########################
########################%%########**#******************#********************########################
#######################%%%########*#********************#***********#****#*#########################
#######################%%%########*#********************##****#******##*############################
######################%%%%##########***************#****###****#**##################################
######################%%%%%##########**************#*############*##################################
######################%%%%%##############################**#########################################
#####################%%%%%%##############################***########################################
#####################%%%%%%#############################*****#######################################
#####################%%%%%%############################*******#############%########################
#####################%%%%%%###%###########################*****#%########%##%#######################
#####################%%%%%%###%#######%###############****###%#%%%##################################
####################%%%%%%%%%%##%####%##############**##%%%%%%%%%%##################################
####################%%%%%%%%%%#%%%%%%%%####*#********####%#####%%###################################
####################%%%%%%%%%%%@%#%%%%%%%#***************###########################################
####################%%%%#%%%%%%%#*########******************##***%##########%#######################
###################%%%%###%%%%######*###************************#%#########%%%######################
###################%%%%####%%%%######****************************##########%%%######################
###################%#%%####%%%%%#********************************##########%%%######################
#####################%%#####%%%%%#*******************************##########%%%######################
#####################%%#####%%%%%%*******************************%#########%%%%#####################
#####################%%#####%%%%%%%*****************************#%#########%%%%#####################
###################%#%%#####%%%%%%%%#*************************#%%%#########%%%%#####################
###################%%%%#####%%%%%%%%%%#*********************#%%%%%%#########%%%#####################
####################%%%######%%%%%%%%%%%%#****************#%%%%%%%%#########%%%%####################
####################%%%######%%%%%%%%%%%%%%%%#**********#%%%%%#%%%%#########%%%%####################
####################%%%######%%%%%%%%%%%%%%%%%%%##**###%%%%%%###%%##########%%%%%###################
#####################%%#######%%%%%%%%%%%%%%%%%%%%%%%%%%%%%######%##########%%%%%###################
####################%%%#######%%%%%%%%%%%%%%%%%%%%%%%%%%%%#######%##########%%%%%%##################
####################%%%########%%%%%%%@@@%%%%%%%%%%%%%%%##################%#%%%%%%##################
####################%%%#######%#%%%%%%%%%%%%%%%%#%%%#%####################%#######**###*******######
####################%%%#######%%%%%%%%%%%%%%#%#####%%##############%############***##**********#####
#################%##%%%#######%%%%%%%%%%%%%%#######%%##############%##########****##************####
####################%%%#######%%%%%%%%%%############%############%%%########****##***************###
####################%%########%%%%%%%%%%######################***#%%########***##*****************##
####################%%########%%%%%%%%%%##################******##%%%#######*#%#******************##
################**#%%%########%%%%%%%%%%##########**************#%%%%#########*********************#
###############***#%%%########%%%%%%%%%#************************#%%%%########**********************#
###############***#%%%#######%%%%%%%%%%#************************#%%%%########**********************#
##############****%%%########%%%%%%%%%%#************************##%%%%########*##******************#
##############***#%%%#######%%%%%%%%%%%%************************###%%%###########******************#
##########%###***#%%########%%%%%%%%%%%%************************###%%%#########*#******************#
##########%##****#%#########%%%%%%%%%%%%#***********************##%#%%##########*******************#
%%%%%########****#%#########%%%%%%%%%%%%#**********************#%###%%%#########******************#%
%%%%%%%%%%###****###########%%%%%%%%%%%%%********************#%%%%##%%%#######%##*****************#%
%%%%%%%%%%##*****########%##%%%%%%#####%%#*****************#%%%%%%%##%%%######%%#*****************#%
%%%%%%%%%%#*****########%%%#%%%%%%######%%#***************%%%%%%%%%%#%%%%#####%%#*****************%%
%%%%%%%%%%#*****#%######%%%%%%%%%########%%#************#%%%%%%%##%%#%%%%%####%%%#***************#%%
%%%%%%%%%%#*****#%######%%%%%%%%%#########%%#***#*****#%%%%%%%%#####%#%%%%%###%%##***************#%%
%%%%%%%%%#******#%######%%%%%%%%%##########%%#**#****%%%%%%%%%#########%%%%###%%#****************%%%
%%%%%%%%%#******#%####%#%%%%%%%%%%##########%%%##**#%%%%%%%%%##########%%%%%##%%#***************#%%%
%%%%%%%%%#******#%%%##%#%%%%%%%%%%%%########%%%%%#%%%%%%%%%%#########%%%%%%%%#%#****************#%%%
%%%%%%%%%#******##%%##%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%######%%%%%%%%%#%*****************%%%%
%%%%%%%%%*********#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*****************%%%%
%%%%%%%%#**********#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%****************#%%%%
%%%%%%%%#**********#%%@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%****************#%%%%
%%%%%%%%#**********#%%@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%****************%%%%%
%%%%%%%%#***********#%%@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%***************#%%%%%
%%%%%%%%#************#%@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@#***************#%%%%%
%%%%%%%##************#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%@@@@#***************%%%%%%
%%%%%%%##*************%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%@@@@@@@@@@#***************%%%%%%
@@@@%%%#*************#%@@@@%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#**************#%%%%%@
@@@@@@%#*************#@@@@@%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#**************#%%@@@@
@@@@@@%##************%@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@#*************#%%@@@@@
@@@@@@###***********#%@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@%@@@@@@#*************#%@@@@@@
@@@@@%###**********##@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@%%@@@@@@###***********#%@@@@@@
@@@@@%###*********##%@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@%%@@@@@%####*********##@@@@@@@
@@@@%###**********##%@@@@@@@@@%@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@%###**********##@@@@@@@
@@@%##***********##%@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@#************##@@@@@@@
	)";
#pragma endregion

	void adjustHearts(int increaseBy) {
		this->currentHearts += increaseBy;
		utils::slowPrint(this->name + " has " + to_string(this->currentHearts) + " (of 3) for you <3.", .06f);
	}
};

bachelorette bachelorettes[4];

bachelorette* pickBachelorette() {
	return &bachelorettes[0];
}

void getMainData() {
	bachelorettes[0].name;
}
void getDialogueData(bachelorette* bach) {
	//TEST
	bach->dialogueData[0].setDialogue("errr... ;-;... h-h-h... hows it going..", "Go Back");
	bach->dialogueData[1].setDialogue("Good Test", "Good!", 1);
	bach->dialogueData[2].setDialogue("Bad Test", "Bad ;-;", 0, 1);
	bach->dialogueData[3].setDialogue("End Test", "End");

	vector<dialogue*> responsesTest;

	responsesTest.push_back(&bach->dialogueData[1]);
	responsesTest.push_back(&bach->dialogueData[2]);
	responsesTest.push_back(&bach->dialogueData[3]);
	bach->dialogueData[0].setResponses(responsesTest);
	responsesTest.clear();

	responsesTest.push_back(&bach->dialogueData[0]);
	bach->dialogueData[1].setResponses(responsesTest);
	responsesTest.clear();

	responsesTest.push_back(&bach->dialogueData[0]);
	bach->dialogueData[2].setResponses(responsesTest);
	responsesTest.clear();
}

dialogue* doDialogue(dialogue* currentDialogue) {
	vector<string> prompts = { currentDialogue->whatHappensText };

	for (int i = 0; i < currentDialogue->response.size(); i++) {
		prompts.push_back(currentDialogue->response[i]->promptText);
	}

	int input = utils::promptUserOptions(prompts, true);

	return currentDialogue->response[input];
}